+function(e){"use strict";var t=function(e,t){this.options=this.enabled=this.$element=null;this.init("puppet",e,t)};t.DEFAULTS={onScreenPercentage:.2,persistOnScreen:true,didScroll:false,setupClass:null,actionClass:null};t.prototype.init=function(t,n,r){this.enabled=true;this.type=t;this.$element=e(n);this.options=this.getOptions(r);this.showtime();e(window).on("scroll","",e.proxy(this.scrollHandler,this))};t.prototype.getOptions=function(t){t=e.extend({},this.getDefaults(),this.$element.data(),t);return t};t.prototype.getDelegateOptions=function(){var t={};var n=this.getDefaults();this._options&&e.each(this._options,function(e,r){if(n[e]!=r)t[e]=r});return t};t.prototype.getDefaults=function(){return t.DEFAULTS};t.prototype.scrollHandler=function(){var e=this;if(!this.options.didScroll){this.options.didScroll=true;setTimeout(function(){e.showtime()},80)}};t.prototype.scrollY=function(){return window.pageYOffset||window.document.documentElement.scrollTop};t.prototype.getViewportHeight=function(){var e=window.document.documentElement["clientHeight"],t=window["innerHeight"];if(e<t)return t;else return e};t.prototype.getOffset=function(){var e=0,t=0,n=this.$element[0];do{if(!isNaN(n.offsetTop)){e+=n.offsetTop}if(!isNaN(n.offsetLeft)){t+=n.offsetLeft}}while(n=n.offsetParent);return{top:e,left:t}};t.prototype.preparePuppet=function(){if(!this.$element.hasClass(this.options.setupClass)){this.$element.addClass(this.options.setupClass)}};t.prototype.dancePuppetDance=function(){if(!this.$element.hasClass(this.options.actionClass)){this.$element.addClass(this.options.actionClass)}};t.prototype.cutTheStrings=function(){this.$element.removeClass(this.options.actionClass)};t.prototype.showtime=function(){this.preparePuppet();if(this.options.persistOnScreen){if(this.onStage()){this.dancePuppetDance()}}else{if(this.onStage()){this.dancePuppetDance()}else{this.cutTheStrings()}}this.options.didScroll=false};t.prototype.onStage=function(){var e=this.$element[0].offsetHeight,t=this.scrollY(),n=t+this.getViewportHeight(),r=this.getOffset().top,i=r+e;return r+e*this.options.onScreenPercentage<=n&&i>=t};var n=e.fn.puppeteer;e.fn.puppeteer=function(n){return this.each(function(){var r=e(this);var i=r.data("tms.puppet");var s=typeof n=="object"&&n;if(!i)r.data("tms.puppet",i=new t(r,s))})};e.fn.puppeteer.Constructor=t;e.fn.puppeteer.noConflict=function(){e.fn.puppeteer=n;return this}}(window.jQuery)